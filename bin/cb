#!/usr/bin/env node

'use strict';

import parseArgs from 'minimist';
import { commands, handler } from '../lib/cli/commands.mjs';

const argv = parseArgs(process.argv.slice(2), { boolean: true });

const command = argv._.shift();

if (
  command === undefined ||
  commands[command] === undefined ||
  argv.help ||
  argv.h
) {
  argv._.unshift(command);
  commands.help.handler(argv);
} else {
  try {
    await handler(command, argv);
  } catch (error) {
    console.error(error.message);
    //process.exit(1);
  }
}

process.exit(0);
